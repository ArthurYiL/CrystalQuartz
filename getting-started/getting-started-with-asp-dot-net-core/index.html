<!DOCTYPE html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-121536364-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-121536364-1');
    </script>

    <meta charset="utf-8">
  
  <title>Crystal Quartz Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

  <link rel="stylesheet" href="/CrystalQuartz/css/style.css">
  <link rel="stylesheet" href="/CrystalQuartz/css/highlightjs_theme.css">
</head>
<body>

<aside id="main-sidebar">
  <h1 id="main-logo">
    <a href="https://github.com/guryanovev/CrystalQuartz" style="float: right;">
      <img src="/CrystalQuartz/images/GitHub-Mark-Light-32px.png" />
    </a>

    <a href="/CrystalQuartz/" id="logo">Crystal Quartz Docs</a></h1>

  <p id="project-info">Crystal Quartz Panel is a lightweight, completely pluggable module for displaying Quartz.NET scheduler jobs information.</p>

  <section id="sidebar-badges">
    <a href="https://travis-ci.org/guryanovev/CrystalQuartz"><img src="https://travis-ci.org/guryanovev/CrystalQuartz.svg?branch=master" /></a>
    <a href="https://gitter.im/guryanovev/CrystalQuartz?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge">
      <img src="https://badges.gitter.im/Join%20Chat.svg" />
    </a>

    
  </section>

  <nav id="main-navigation">
      
      
      <ul>
          

          <li class="">
              <a href="/CrystalQuartz/categories/getting-started/">Getting Started</a>

              
              <ul>
                  
                  <li class="active">
                    <a href="/CrystalQuartz/getting-started/getting-started-with-asp-dot-net-core/" class="">Getting Started with ASP.NET Core</a>
                  </li>
                  
                  <li class="">
                    <a href="/CrystalQuartz/getting-started/getting-started-with-owin/" class="">Getting Started with OWIN</a>
                  </li>
                  
              </ul>
              

          </li>
          

          <li class="">
              <a href="/CrystalQuartz/categories/advanced-config/">Advanced Configuration</a>

              

          </li>
          
      </ul>
      

  </nav>
</aside>

<section id="main-content">
  <header id="article-header">
    <nav>
        <ul>
            <li><a href="/CrystalQuartz/">Home</a></li>
            <li>
                <a class="article-category-link" href="/CrystalQuartz/categories/getting-started/">Getting Started</a>
            </li>
        </ul>
    </nav>

    
  
    <h1 class="article-title" itemprop="name">
      Getting Started with ASP.NET Core
    </h1>
  

</header>

<article id="post-getting-started-with-asp-dot-net-core" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article describes how you can get started with CrystalQuartz Panel
plugged into ASP.NET Core application.</p>
<a id="more"></a>
<h2 id="Pre-requirements"><a href="#Pre-requirements" class="headerlink" title="Pre-requirements"></a>Pre-requirements</h2><p>It is assumed that you already have ASP.NET Core application up and running.
You should have an instance of <code>Microsoft.AspNetCore.Builder.IApplicationBuilder</code> object 
available. For web applications it is usually in <code>Startup.cs</code> file. </p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Configure</span>(<span class="params">IApplicationBuilder app, IHostingEnvironment env</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// CrystalQuartz Panel will be initialized here</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// app.UseMvc and other calls go next</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is also assumed that you have <a href="http://nuget.org/List/Packages/Quartz" target="_blank" rel="noopener">Quartz.NET v3 package</a> installed and <code>IScheduler</code> instance
available.</p>
<h2 id="1-Setup"><a href="#1-Setup" class="headerlink" title="1 Setup"></a>1 Setup</h2><p>As a first step, you need to install
<a href="http://nuget.org/List/Packages/CrystalQuartz.AspNetCore" target="_blank" rel="noopener">CrystalQuartz.AspNetCore</a>
NuGet package to the target project:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Install-Package CrystalQuartz.AspNetCore</span><br></pre></td></tr></table></figure>
<p>That will add a <code>CrystalQuartz.AspNetCore.dll</code> reference to your project.
The <code>CrystalQuartz.AspNetCore.dll</code> is a single dll that contains all the
resources needed for CrystalQuartz to work.</p>
<h2 id="2-Configuration"><a href="#2-Configuration" class="headerlink" title="2 Configuration"></a>2 Configuration</h2><p>As a next step, you need to hook CrystalQuartz middleware into your 
ASP.NET Core environment. It should be done by calling <code>UseCrystalQuartz</code> 
extension method at the moment of pipeline initialization. The generic 
syntax for panel configuration looks like this:</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> CrystalQuartz.AspNetCore;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * app is IApplicationBuilder</span></span><br><span class="line"><span class="comment"> * scheduler is your IScheduler (local or remote)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">app.UseCrystalQuartz(() =&gt; scheduler, options);</span><br></pre></td></tr></table></figure>
<p>The arguments are:</p>
<ul>
<li><code>() =&gt; scheduler</code> is a provider pointing to the scheduler instance;</li>
<li><code>options</code> is an optional for panel customization.</li>
</ul>
<h3 id="2-1-Configuration-Scheduler"><a href="#2-1-Configuration-Scheduler" class="headerlink" title="2.1 Configuration - Scheduler"></a>2.1 Configuration - Scheduler</h3><p>You should already have an <code>IScheduler</code> object instance so you can pass 
a <code>Func</code> pointing to it to the configuration extension method:</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Configure</span>(<span class="params">IApplicationBuilder app, IHostingEnvironment env</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    IScheduler scheduler = CreateScheduler();</span><br><span class="line">    app.UseCrystalQuartz(() =&gt; scheduler);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this method is just a sample of scheduler initialization</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> IScheduler <span class="title">CreateScheduler</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> schedulerFactory = <span class="keyword">new</span> StdSchedulerFactory();</span><br><span class="line">    <span class="keyword">var</span> scheduler = schedulerFactory.GetScheduler().Result;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// construct job info</span></span><br><span class="line">    <span class="keyword">var</span> jobDetail = JobBuilder.Create&lt;HelloJob&gt;()</span><br><span class="line">        .WithIdentity(<span class="string">"myJob"</span>)</span><br><span class="line">        .StoreDurably()</span><br><span class="line">        .Build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fire every minute</span></span><br><span class="line">    <span class="keyword">var</span> trigger = TriggerBuilder.Create()</span><br><span class="line">        .WithIdentity(<span class="string">"myTrigger"</span>)</span><br><span class="line">        .StartNow()</span><br><span class="line">        .WithSimpleSchedule(x =&gt; x.WithIntervalInMinutes(<span class="number">1</span>).RepeatForever())</span><br><span class="line">        .Build();</span><br><span class="line"></span><br><span class="line">    scheduler.ScheduleJob(jobDetail, trigger);</span><br><span class="line"></span><br><span class="line">    scheduler.Start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scheduler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Or you can get <code>IScheduler</code> from an IoC container if you have one configured:</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* ... */</span></span><br><span class="line">app.UseCrystalQuartz(() =&gt; container.Resolve&lt;IScheduler&gt;());</span><br></pre></td></tr></table></figure>
<h3 id="2-2-Options"><a href="#2-2-Options" class="headerlink" title="2.2 Options"></a>2.2 Options</h3><p>Second (optional) argument of <code>UseCrystalQuartz</code> method allows to do some panel customizations. 
The object should be an instance of <code>CrystalQuartzOptions</code> class. Please check the <a href="https://github.com/guryanovev/CrystalQuartz/blob/master/src/CrystalQuartz.Application/CrystalQuartzOptions.cs" target="_blank" rel="noopener">options class
source code</a> for details.</p>
<h2 id="3-Running-the-panel"><a href="#3-Running-the-panel" class="headerlink" title="3 Running the panel"></a>3 Running the panel</h2><p>Once the configuration is done, you can run your project and navigate to <code>http://YOUR_URL/quartz</code>
to see the panel UI. </p>
<h2 id="4-Examples"><a href="#4-Examples" class="headerlink" title="4 Examples"></a>4 Examples</h2><ul>
<li><a href="//github.com/guryanovev/CrystalQuartz/tree/master/examples/09_Quartz3_AspNetCore_Web">OWIN ASP.NET Core Web App</a></li>
</ul>

      
    </div>
  </div>
</article>

<footer id="article-footer">
    Page updated at <span>Mon Feb 04 2019 15:15:58 GMT+0000</span>
    <a href="https://github.com/guryanovev/CrystalQuartz/blob/master/docs/source/_posts/getting-started-with-asp-dot-net-core.md">Edit this page on GitHub</a>
</footer>
</section>

</body>
</html>